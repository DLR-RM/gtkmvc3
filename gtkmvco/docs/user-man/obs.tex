\subsection{\label{OBS} Implementation of the \obs}

A Model does not know that it is connected to a (set of) controllers,
because this knowledge implies the knowledge of the \gui semantics,
which should be out-of-scope for the Model.

Nevertheless, sometimes it is necessary for a Model to communicate to
the \gui logics (generally the Controllers set) that the model state
changed. This communication can be implemented by the \obs, that
provides a mechanism where \emph{Observers} are notified when
\emph{observed} state in the model get changed.

Even if models are typically observed by the \gui logics, the
mechanism can be used also to decouple (isolate) models and other
entities in the application logics. For example, models can be
observed by other models.

In \pygtkmvc Models' state has been extended with a mechanism called
\emph{Observable Properties}. An observable property is a part of the
Model state which is also externally observable via an
\emph{Observer}. Every time an observable property changes, any
interested Observer will be notified of the event.

Figure \ref{F:OBS} shows a Model (\kw{Model1}) containing an
observable property (\kw{color}). There are also a Controller and a
View (to show the colour), and the Controller is also an observer of
\kw{Model1}. Furthermore, there is another Observer that is model 
\kw{Model2}, whose state the designer wanted to make dependent on the
state of \kw{Model1}, but without explicitly coupling the two models.

When the property \kw{color} changes for example to red, all connected
Observers will be notified. Each observer will then perform the
necessary operation according to the respective logics. For example,
the Controller will make the connected View showing the occurred
change.

\begin{figure}[htbp]
\begin{center}
\includegraphics[width=6cm]{eps/obs.eps}
\caption{\label{F:OBS}Observable models and Observers}
\end{center}
\end{figure}

Each Observer declares it is interested in receiving notifications on
one or more properties changing, by a mechanism called
\kw{Registration}. Once an Observer (for example, a Controller)
registered itself among the Model it is associated with, it will be
notified of all changes of the observable properties. The Observers
will be notified only of the property changes that they are actually
interested in observing.

An implicit syntactical rule binds observable properties names to
notifications sockets inside Observers. This rule allows an automatic
connection, and fixes a sort of ``rule'' for methods names.

Later in this document, some implementation details are discussed, and
further details about observable properties are presented. Finally,
an example in the latest part should make all these concepts clearer.


\subsubsection{\label{KOBS} Supported types of Observable Properties}

Observable properties can hold several types of values:

\begin{description}
\item [Any type] Change notification will occur only when the value is
  \emph{assigned} to the property.

\item [Mutable sequential types] Like lists and maps. A notification
  will occur even when the \emph{content} of the object changes, e.g.
  when one element of the sequence is assigned, added, removed, etc.
 
\item [User classes] The user can declare the set of methods that can
  be observed (i.e. observables will be notified when before or/and
  after observed object methods are called.) 

\item [Events] To notify the observers that some event is occurred.
\end{description}

All needed details about observable property types are explained later
in this document (see section \ref{KOBS:DET}).
