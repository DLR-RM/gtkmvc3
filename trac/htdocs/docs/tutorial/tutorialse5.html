<html > 
<head><title>The implementation without glade</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,info,next,mouseover,no-DOCTYPE --> 
<meta name="src" content="tutorial.tex"> 
<meta name="date" content="2009-03-31 17:46:00"> 
<link rel="stylesheet" type="text/css" href="tutorial.css"> 
<script type="text/javascript" src="tutorial-js.js"></script> 
<script type="text/javascript" src="overlib.js"><!-- overLIB (c) Erik Bosrup --></script> <!--http://www.bosrup.com/web/overlib/--></head><body 
><div id="overDiv" style="position:absolute; visibility:hidden; z-index:1000;"></div> 
   <!--l. 357--><div class="crosslinks"><p class="noindent">[<a 
href="tutorialse6.html" >next</a>] [<a 
href="tutorialse4.html" >prev</a>] [<a 
href="tutorialse4.html#tailtutorialse4.html" >prev-tail</a>] [<a 
href="#tailtutorialse5.html">tail</a>] [<a 
href="tutorial.html#tutorialse5.html" >up</a>] </p></div>
   <h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x7-100005"></a>The implementation without glade</h3>
<!--l. 359--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.1   </span> <a 
 id="x7-110005.1"></a>The model</h4>
<!--l. 360--><p class="noindent" >The model does not depend on the controller+view sides, so it is exactly the same as
for the implementation glade-based.
<!--l. 363--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.2   </span> <a 
 id="x7-120005.2"></a>The view</h4>
<!--l. 364--><p class="noindent" >Using manually constructed views is slightly less intuitive that using glade-based
views, since the architecture of the view-side <span 
class="cmti-10">pygtkmvc </span>is mainly designed to be used
with glade files.
                                                                  

                                                                  
   <div class="verbatim">
#&#x00A0;This&#x00A0;is&#x00A0;file&#x00A0;view_no_glade.py
&#x00A0;<br />from&#x00A0;gtkmvc.view&#x00A0;import&#x00A0;View
&#x00A0;<br />import&#x00A0;gtk
&#x00A0;<br />
&#x00A0;<br />class&#x00A0;MyViewNoGlade&#x00A0;(View):
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;def&#x00A0;__init__(self):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;The&#x00A0;view&#x00A0;here&#x00A0;is&#x00A0;not&#x00A0;constructed&#x00A0;from&#x00A0;a&#x00A0;glade&#x00A0;file.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;View.__init__(self)
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;The&#x00A0;set&#x00A0;of&#x00A0;widgets:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;w&#x00A0;=&#x00A0;gtk.Window()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;h&#x00A0;=&#x00A0;gtk.VBox()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;l&#x00A0;=&#x00A0;gtk.Label()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;b&#x00A0;=&#x00A0;gtk.Button("Press")
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;h.pack_start(l)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;h.pack_end(b)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;w.add(h)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;w.show_all()
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;We&#x00A0;add&#x00A0;all&#x00A0;widgets&#x00A0;we&#x00A0;are&#x00A0;interested&#x00A0;in&#x00A0;retrieving&#x00A0;later&#x00A0;in
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;the&#x00A0;view,&#x00A0;by&#x00A0;giving&#x00A0;them&#x00A0;a&#x00A0;name.&#x00A0;Suppose&#x00A0;you&#x00A0;need&#x00A0;access
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;only&#x00A0;to&#x00A0;the&#x00A0;main&#x00A0;window,&#x00A0;label&#x00A0;and&#x00A0;button.&#x00A0;&#x00A0;Widgets&#x00A0;are
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;added&#x00A0;like&#x00A0;in&#x00A0;a&#x00A0;map:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;self[&#8217;main_window&#8217;]&#x00A0;=&#x00A0;w
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;self[&#8217;label&#8217;]&#x00A0;=&#x00A0;l
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;self[&#8217;button&#8217;]&#x00A0;=&#x00A0;b
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;return
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;pass&#x00A0;#&#x00A0;end&#x00A0;of&#x00A0;class
</div>
<!--l. 401--><p class="nopar" >
<!--l. 404--><p class="indent" >   The entire work is carried out by the View&#8217;s constructor which can be exploited
to manually construct all the widgets set.
<!--l. 407--><p class="indent" >   Following lines are used to build the widgets set, and to associate a few of them
with string names (only those that will have to accessed later).
<!--l. 411--><p class="indent" >   Notice that here <span 
class="cmsl-10">Glade </span>file has not been used at all. Nevertheless, a mixed
solution where <span 
class="cmsl-10">Glade </span>file(s) and manually constructed widgets sets is fully
supported.
<!--l. 416--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.3   </span> <a 
 id="x7-130005.3"></a>The controller</h4>
                                                                  

                                                                  
<!--l. 417--><p class="noindent" >The controller is the same that has been used for the glade-based version, a part
from a further signal connection that is performed to connect the button
&#8220;<span id="textcolor45"><span 
class="cmtt-10">clicked</span></span>&#8221; event to class method <span id="textcolor46"><span 
class="cmtt-10">self.on</span><span 
class="cmtt-10">_button</span><span 
class="cmtt-10">_clicked</span></span>. For this reason,
class <span id="textcolor47"><span 
class="cmtt-10">MyControllerNoGLade</span></span> is derived from class <span id="textcolor48"><span 
class="cmtt-10">MyController</span></span> to reduce
typing.
                                                                  

                                                                  
   <div class="verbatim">
#&#x00A0;This&#x00A0;is&#x00A0;file&#x00A0;ctrl_no_glade.py
&#x00A0;<br />from&#x00A0;ctrl_glade&#x00A0;import&#x00A0;MyController
&#x00A0;<br />
&#x00A0;<br />class&#x00A0;MyControllerNoGlade&#x00A0;(MyController):
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;def&#x00A0;register_view(self,&#x00A0;view):
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;#&#x00A0;connects&#x00A0;the&#x00A0;signals:
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;self.view[&#8217;button&#8217;].connect(&#8217;clicked&#8217;,&#x00A0;self.on_button_clicked)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;return
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;pass&#x00A0;#&#x00A0;end&#x00A0;of&#x00A0;class
</div>
<!--l. 437--><p class="nopar" >
<!--l. 441--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">5.4   </span> <a 
 id="x7-140005.4"></a>The main code</h4>
<!--l. 442--><p class="noindent" >Like previous version, main code for manually built view is very short:
                                                                  

                                                                  
   <div class="verbatim">
#&#x00A0;This&#x00A0;is&#x00A0;file&#x00A0;main_no_glade.py
&#x00A0;<br />import&#x00A0;gtk
&#x00A0;<br />from&#x00A0;model&#x00A0;import&#x00A0;MyModel
&#x00A0;<br />from&#x00A0;ctrl_no_glade&#x00A0;import&#x00A0;MyControllerNoGlade
&#x00A0;<br />from&#x00A0;view_no_glade&#x00A0;import&#x00A0;MyViewNoGlade
&#x00A0;<br />
&#x00A0;<br />m&#x00A0;=&#x00A0;MyModel()
&#x00A0;<br />v&#x00A0;=&#x00A0;MyViewNoGlade()
&#x00A0;<br />c&#x00A0;=&#x00A0;MyControllerNoGlade(m,v)
&#x00A0;<br />gtk.main()
</div>
<!--l. 457--><p class="nopar" >
                                                                  

                                                                  
   <!--l. 460--><div class="crosslinks"><p class="noindent">[<a 
href="tutorialse6.html" >next</a>] [<a 
href="tutorialse4.html" >prev</a>] [<a 
href="tutorialse4.html#tailtutorialse4.html" >prev-tail</a>] [<a 
href="tutorialse5.html" >front</a>] [<a 
href="tutorial.html#tutorialse5.html" >up</a>] </p></div>
<!--l. 460--><p class="indent" >   <a 
 id="tailtutorialse5.html"></a>   
</body></html> 
